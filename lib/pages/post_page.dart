import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:get/get.dart';import 'package:get/get_rx/src/rx_types/rx_types.dart';import 'package:google_fonts/google_fonts.dart';import 'package:loading_animations/loading_animations.dart';import 'package:url_launcher/url_launcher.dart';import 'package:whatsapp_unilink/whatsapp_unilink.dart';class Post_page extends StatefulWidget {  const Post_page({Key? key}) : super(key: key);  @override  State<Post_page> createState() => _Post_pageState();}RxBool swich2 = false.obs;final TextEditingController Post = TextEditingController();final TextEditingController number = TextEditingController();final RxString typed_post = ''.obs;final RxString typed_number = ''.obs;RxBool flag = false.obs;class _Post_pageState extends State<Post_page> {  @override  Widget build(BuildContext context) {    return Scaffold(      backgroundColor: Colors.white,      body: SafeArea(        child: Padding(          padding: EdgeInsets.symmetric(horizontal: 25),          child: SingleChildScrollView(              child: Column(            children: [              Image.asset(                "photo/nakhla.jpg",                width: 300,                height: 300,              ),              Obx(() {                return Container(                  width: 400,                  height: 60,                  child: TextField(                    textDirection: TextDirection.rtl,                    onChanged: (text) {                      typed_number.value = text;                    },                    obscureText: false,                    controller: number,                    decoration: InputDecoration(                        hintTextDirection: TextDirection.rtl,                        border: OutlineInputBorder(                          borderRadius: BorderRadius.circular(18),                          borderSide: BorderSide(color: Colors.black, width: 2),                        ),                        enabledBorder: OutlineInputBorder(                          borderRadius: BorderRadius.circular(18.0),                          borderSide: BorderSide(                            width: 2,                            color: Colors.black26,                          ),                        ),                        //errorBorder:InputDecoration.errorText,                        prefixIcon: Icon(Icons.phone,                            color: typed_number.value.isEmpty                                ? Colors.black                                : Color.fromRGBO(144, 195, 70, 1)),                        hintText: " رقم الهاتف :",                        hintStyle: GoogleFonts.tajawal(fontSize: 20),                        contentPadding: const EdgeInsets.symmetric(                            horizontal: 5, vertical: 19)),                    keyboardType: TextInputType.phone,                    maxLines: 1, // <-- SEE HERE                  ),                );              }),              SizedBox(height: 20,),              Obx(() {                return Container(                  width: 400,                  height: 60,                  child: TextField(                    textDirection: TextDirection.rtl,                    onChanged: (text) {                      typed_post.value = text;                    },                    obscureText: false,                    controller: Post,                    decoration: InputDecoration(                        hintTextDirection: TextDirection.rtl,                        border: OutlineInputBorder(                          borderRadius: BorderRadius.circular(18),                          borderSide: BorderSide(color: Colors.black, width: 2),                        ),                        enabledBorder: OutlineInputBorder(                          borderRadius: BorderRadius.circular(18.0),                          borderSide: BorderSide(                            width: 2,                            color: Colors.black26,                          ),                        ),                        //errorBorder:InputDecoration.errorText,                        prefixIcon: Icon(Icons.production_quantity_limits_sharp,                            color: typed_post.value.isEmpty                                ? Colors.black                                : Color.fromRGBO(144, 195, 70, 1)),                        hintText: " ادخل  النص :",                        hintStyle: GoogleFonts.tajawal(fontSize: 20),                        contentPadding: const EdgeInsets.symmetric(                            horizontal: 5, vertical: 19)),                    keyboardType: TextInputType.multiline,                    maxLines: 10, // <-- SEE HERE                  ),                );              }),              Container(                  margin: EdgeInsets.only(top: 150, left: 30, right: 30),                  width: 337,                  height: 60,                  child: RawMaterialButton(                    onPressed: () {                      print("flag : ${flag.value}");                      flag.value = true;                      print("flag : ${flag.value}");                      String text_test = Post.text;                      String test1 =                          "#توصيل مجاني \n متجر نخلة يقدم افضل العروض ب انسب الاسعار ";                      String test2 =                          "للاستفسار : 07722288942   \n (فايبر-واتساب-تيلغرام)";                      print("${test1}\n${Post.text} \n${test2}");                      Future.delayed(Duration(seconds: 3), () {                        launchWhatsApp(text: "${test1}\n\n${Post.text}\n\n${test2}\n\n", number: number.text);                        flag.value =false;                      });                    },                    fillColor: Color.fromRGBO(144, 195, 70, 0.9),                    shape: RoundedRectangleBorder(                        borderRadius: BorderRadius.circular(18)),                    child: Obx(                      () {                        return Padding(                          padding: const EdgeInsets.only(top: 5),                          child: flag.value == true?LoadingFadingLine.circle(                              size: 80,                              backgroundColor: Color.fromRGBO(103, 74, 47, 0.9)):Text(                            "ارسال المنشور",                            style: GoogleFonts.tajawal(                                fontSize: 25,                                fontWeight: FontWeight.w700,                                color: Colors.white),                          )                        );                      }                    )                  ))            ],          )),        ),      ),    );  }  launchWhatsApp({required String? text,required String number}) async {    WhatsAppUnilink link = WhatsAppUnilink(      phoneNumber: '964$number',      text: text,    );    await launch('$link');  }}